#:import MDSwipeToDismissItem kivymd.uix.list.MDSwipeToDismissItem
#:import TwoLineListItem kivymd.uix.list.TwoLineListItem

ScreenManager:
    id: manager

    MDScreen:
        name: 'main_list_screen'
        MDBoxLayout:
            orientation: 'vertical'

            MDToolbar:
                title: "Safe Mode List"
                elevation: 10

            RecycleView:
                id: missing_list_rv
                viewclass: 'MissingItem'
                RecycleBoxLayout:
                    default_size: None, dp(64)
                    default_size_hint: 1, None
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                    padding: dp(10)
                    spacing: dp(10)

            MDBoxLayout:
                size_hint_y: None
                height: "56dp"
                padding: "8dp"

                MDRaisedButton:
                    text: "Clear All"
                    on_release: app.show_clear_dialog() 
                    size_hint_x: 0.4

                Widget: 

                MDFloatingActionButton:
                    icon: "camera-off"
                    on_release: app.go_to_scanner_screen()

    MDScreen:
        name: 'scanner_screen'
        MDBoxLayout:
            orientation: 'vertical'
            padding: dp(20)
            spacing: dp(20)
            
            MDToolbar:
                title: "Scanner (Safe Mode)"
                left_action_items: [['arrow-left', lambda x: app.go_to_main_screen()]]

            MDLabel:
                text: "Scanner Disabled for Testing.\nTap below to simulate a scan."
                halign: "center"

            MDRaisedButton:
                text: "Simulate Scan (Add Test Item)"
                pos_hint: {"center_x": .5}
                on_release: app.simulate_scan()

<MissingItem@MDSwipeToDismissItem>:
    text: ''
    secondary_text: ''
    barcode_id: ''
    on_dismiss: app.remove_found_item(root.barcode_id)
    
    MDBoxLayout:
        size_hint_y: None
        height: dp(64)
        padding: dp(5)
        
        TwoLineListItem:
            text: root.text
            secondary_text: root.secondary_text
